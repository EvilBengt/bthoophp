---
---
Redovisning kmom06
=========================

Detta innehåll är skrivet i markdown och du hittar innehållet i filen `content/redovisning/06_kmom06.md`.

Hur gick det att jobba med klassen för filtrering och formatting av texten?
---------------------------------------------------------------------------

Det gick rätt smidigt faktiskt. Jag fixade så `parse`-metoden ignorerar tom sträng
och även så den kastar eget exception om den får ett filter som inte finns. I övrigt
är koden annars lik den från exemplet. Då jag använder denna klassen i cms-uppgiften
lade jag även till en `slugify`-metod för att generera länkar. Det var lite klurigt
att få PHP att köra metoder med metodnamnet som en sträng från `$filters` men efter
lite Googlande hittade jag en smidig lösning. I min lilla template-engine använder
jag `call_user_func` eller vad den heter men det fungerar inte i objekt.

För att förenkla testsidan gjorde jag även en `ExampleProvider`-klass för olika texter
som jag sedan kör igenom respektive filter.

Berätta om din klasstruktur och kodstruktur för din lösning av webbsidor med innehåll i databasen.
--------------------------------------------------------------------------------------------------

Här följde jag `KISS` en hel del vad gäller klasstruktur. De enda klasserna jag har
är en controller och en `MyCMS`-klass som extra lager över `Anax\Database` och lite
annat, förutom `MyTextFilter`. Alla routes hanteras i controllern och den gör lite
enkla modifieringar av data-format beroende på var datan ska användas. `MyCMS`-klassen
har alla queries och sådant till databasen och använder sig av `MyTextFilter` för att
filtera texten innan den visas. I controllern instansierar jag `MyCMS`-klassen när
den behövs och gör alla databasanrop genom den.

Hur känner du rent allmänt för den koden du skrivit i din me/redovisa, vad är bra och mindre bra?
-------------------------------------------------------------------------------------------------

Allt är så klart inte perfekt. Hade jag haft några veckor till hade jag kanske velat
strukturera en del kod. När jag jobbar med egna projekt lägger jag väldigt mycket tid
och fokus på de små detaljerna och strukturen. Både för att göra koden så tydlig som
möjligt men även för att future-proofa en hel del. När man har tidsbegränsingar kan
man dock inte sitta med en liten detalj i flera timmar så man måste prioritera.

Trots att det finns lite som jag kanske velat göra annorlunda, är jag ändå rätt nöjd
om jag tänker på hur mycket tid det har tagit. Hade jag skrivit cms-uppgiften i till
exempel C# på egen tid, hade jag nog over-engineerat skiten ur det som jag brukar.
Det betyder dock inte att resultatet hade blivit bättre, men det hade definitivt tagit
längre tid...

Ser du potential till refactoring av din kod och/eller behov av stöd från ramverket?
------------------------------------------------------------------------------------

Ramverket har nog hjälp mer än vad jag kanske märkt just när jag jobbat med koden.
Det tvingar en till att strukturera sin kod på ett visst sätt (till viss del iaf).
Hade jag gjort allt detta utanför ett ramverk är risken att jag antingen skrivit
väldigt ful och svårtläst kod, men mer troligt är att jag hade återuppfunnit hjulet
och byggt ett eget lustigt ramverk för att få lite struktur på det hela. Det beror
på hur mycket tid jag hade haft.

Det finns nästan alltid potential för refactoring. Jag funderade till exempel till
en början på att dela upp koden i cms-uppgiften i de klasser som föreslogs i
uppgiften. När jag började planera och jobba kände jag dock att koden kunde bli bra
ändå. Jag hade kanske kunnat dra nytta av en mer uppdelad struktur för vissa
funktioner men då uppgiften inte var jättestor (bara stor) kände jag inte att det
behövdes. Med största sannolikhet hade det tagit längre tid.

I framtiden kanske man skulle kunna motivera att strukturera om, för att underlätta
på-/utbyggnad dock.

Vilken är din TIL för detta kmom?
---------------------------------

Jag har sett BBCode innan (på dbwebb-forumet tex) men aldrig använt det. Sedan vi
gick igenom Markdown i design-kursen har jag tyckt att det är det bästa vad gäller
läsbarhet. Nu vet jag dock att allt som krävs för att översätta BBCode är några
rader RegEx. Det borde jag väl kunnat räkna ut, men men... Markdown är nog
fortfarande favoriten då originaltexten blir nästan lika lättläst som resultatet.
