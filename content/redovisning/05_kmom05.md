---
---
Redovisning kmom05
=========================

Detta innehåll är skrivet i markdown och du hittar innehållet i filen `content/redovisning/05_kmom05.md`.

Några reflektioner kring koden i övningen för PHP PDO och MySQL?
----------------------------------------------------------------

Det sättet som sidorna byggs upp med olika vyer och hela flödet med en switch-sats i front-controllern
var nog nytt för mig. Det känns som ett rimligt sätt att organisera en sådan sida utan ramverk.
Hade jag gjort den själv hade jag nog inte kommit på att göra så. Troligtvis hade jag använt min template
engine, trots hur klumpig den är till mindre projekt... Jag tycker det är rätt gött att slippa skriva
PHP-kod blandat med HTML.


Hur gick det att överföra koden in i ramverket, stötte du på några utmaningar eller svårigheter?
------------------------------------------------------------------------------------------------

Jag var faktiskt lite orolig att det skulle vara väldigt krångligt, men det visade sig vara rätt så smidigt
faktiskt. Jag lade in allt i en kontroller istället för route-hanterare men arbetssätten känns väldigt lika
så det var knappast svårare. Efter lite strul med att få till länkar till bilderna fick jag till slut
allt till att funka fint.

Jag utgick från vyerna i exempelkoden och byggde om dem en del för att få länkar och annat att stämma.

Hur gick det att använda databasmodulen anax/database, några funderingar kring denna typen av moduler?
------------------------------------------------------------------------------------------------------

Det var rätt smidigt faktiskt. Hade jag haft mer tid hade jag kanske lagt ännu ett lager ovanpå med
särskilda metoder för att ta bort/redigera/lägga till osv. så jag hade sluppit skriva SQL-kod i controllern.

Rent allmänt känns det ändå rätt vettigt med sådana moduler då de kan underlätta och även lägga till extra
funktionalitet ovanpå till exempel PDO. Dock kanske de visar sig lite mer med mer avancerade anrop då man
kanske i just detta fallet hade kunnat göra samma sak direkt mot PDO. Visserligen sparar man några rader
kod då man kör "prepare" och "execute" på en gång, och det är väl kanske inget man ska underskatta.

Berätta om din slutprodukt för filmdatabasen, gjorde du endast basfunktionaliteten eller lade du till extra features och hur tänkte du till kring användarvänligheten och din kodstruktur?
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

Slutprodukten blev hyffsat enkel med undersidor för att:

* visa alla filmer
* söka på titel
* söka på årtal
* skapa ny film

I vyn där man ser alla filmer finns det en länk på varje film för att redigera, som tar en till en redigeringssida.
På redigeringssidan finns även en knapp för att radera filmen. Alla sidor har länkar till första sidan utöver
navbaren som alltid syns längst upp.

Vad gäller användarvänlighet gjorde gick jag in för att inte ha en massa olika sidor och länkar utan vill man
ändra något på en film (att ta bort medräknat) klickar man på den enda länken i tabellen. Ändå valde jag att
ha kvar de två separata sidorna för att söka på titel/årtal, detta för att de två sökmetoderna skiljer sig så pass
att det ändå skulle kräva två olika formulär på samma sida. Risken är då att sidan skulle kännas lite väl klumpig.
Är man på en söksida är den andra ändå bara ett klick bort.

Kodstrukturen gjorde jag så enkel som möjligt mer eller mindre. Jag har inget i `src/` utöver min `MoviesController`
och i den har jag ett antal actions för sidans olika funktioner. Jag har delat in actions så som edit och create
till var sin GET- respektive POST-action för att inte få allt för tunga metoder. Jag hade mycket väl kunnat flytta
ut delar av källkoden till andra klasser/filer men så pass liten som kontrollern ändå blev så känner jag inte att
jag skulle tjäna något på det.

Vilken är din TIL för detta kmom?
---------------------------------

Det här är definitivt något jag lärt mig tidigare, både i htmlphp-kursen och i tidigare kurser jag läst; att man
måste köra `htmlentities()` på data från klienten för att undvika XSS om datan skrivs ut på någon sida igen.
När jag började använda PHP PDO tänkte jag "gött! Nu behöver jag inte sanera min data längre!". Där hade jag fel
dock... PDO löser (oftast) SQL-injections, men har inget med XSS att göra. Tur att jag inte publicerat mitt egna
databas/api/mithril-projekt än. Visserligen ska det inte vara publikt ändå men man kan aldrig vara för säker!
